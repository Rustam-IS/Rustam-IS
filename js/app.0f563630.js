(function(){"use strict";var __webpack_modules__={6152:function(e,t,n){var o=n(9242),r=n(3396);const i=(0,r.uE)('<div id="code"><div id="bar"><div id="title"> Grid Studio (548-I) </div><div id="stop"><svg xmlns="http://www.w3.org/2000/svg" fill="#000000" width="800px" height="800px" viewBox="0 0 24 24"><path fill="#ffffff" d="M22,2H4A1,1,0,0,0,3,3V21a1,1,0,0,0,1,1H22a1,1,0,0,0,1-1V3A1,1,0,0,0,22,2ZM21,20H5V4H21Z"></path></svg></div><div id="exec"><svg xmlns="http://www.w3.org/2000/svg" width="800px" height="800px" viewBox="0 0 16 16" fill="none"><path fill="#ffffff" d="M8 1.25a2.101 2.101 0 00-1.785.996l.64.392-.642-.388-5.675 9.373-.006.01a2.065 2.065 0 00.751 2.832c.314.183.67.281 1.034.285h11.366a2.101 2.101 0 001.791-1.045 2.064 2.064 0 00-.006-2.072L9.788 2.25l-.003-.004A2.084 2.084 0 008 1.25z"></path></svg></div></div><div id="editor"></div></div><div id="field"></div>',2);function c(e,t,n,o,r,c){return i}n(560),n(8858),n(1318),n(3228);var a=n(3956),s=n(2305);function l(e){return e.split(/[ \n\t]+/).filter((function(e){return["RIGHT","UP","LEFT","DOWN","SET","CALL","PROCEDURE","ENDPROC","REPEAT","ENDREPEAT","IFBLOCK","ENDIF"].includes(e)||/[a-zA-Z][a-zA-Z0-9]*/.test(e)||/[0-9]+/.test(e)}))}var u=n(8859);function _(e){const t=Math.min(window.innerHeight,window.innerWidth);return t*e/100}const d=e=>new Promise((t=>setTimeout(t,e)));async function p({func:e,scope:t,objs:n,board:o,interrupt:r,walls:i,configs:c={segment:{strokeWidth:()=>_(.5),strokeColor:"lightblue",highlightStrokeColor:"lightblue"},point:{strokeColor:"rgb(190, 100, 20)",highlightStrokeColor:"rgb(190, 100, 20)",fillColor:"rgb(190, 100, 20)",highlightFillColor:"rgb(190, 100, 20)",size:()=>_(.55),name:""}}}){let a=.5,s=.5;const l=o.create("point",[a,s],{...c.point,size:()=>_(1.2)});n.push([l]);const u=100;async function p(e,t){const _=o.create("point",[a,s],c.point),p=o.create("point",[a,s],c.point),f=o.create("segment",[_,p],c.segment),b="x"===t?e:0,m="y"===t?e:0;n.push(_,p,f);const k="x"===t?e<0?-.5:.5:1,h="y"===t?e<0?-.5:.5:1,w=function(e,t){return k<0?e>=t:e<=t},g=function(e,t){return h<0?e>=t:e<=t};for(let n=a;w(n,a+b);n+=k)for(let e=s;g(e,s+m);e+=h){if(r())return;n%1<.1&&[[n,Math.floor(e)],[n,Math.ceil(e)]]in i&&(r=function(){return alert("Стена!"),!0}),e%1<.1&&[[Math.floor(n),e],[Math.ceil(n),e]]in i&&(r=function(){return alert("Стена!"),!0}),p.moveTo([n,e],u),l.moveTo([n,e],u),await d(u)}a+=b,s+=m}return e(t={...t,RIGHT:async function(e){r()||await p(e,"x")},UP:async function(e){r()||await p(e,"y")},LEFT:async function(e){r()||await p(-e,"x")},DOWN:async function(e){r()||await p(-e,"y")},blocked:function(e){const[t,n]=[Math.floor(a),Math.ceil(a)],[o,r]=[Math.floor(s),Math.ceil(s)];return"RIGHT"===e?[[n,o],[n,r]]in i:"LEFT"===e?[[t,o],[t,r]]in i:"UP"===e?[[t,r],[n,r]]in i:"DOWN"===e?[[t,o],[n,o]]in i:void 0}}),n}let f;a.Mj.register({id:"custom"}),a.Mj.setMonarchTokensProvider("custom",{keywords:["IFBLOCK","ENDIF","REPEAT","ENDREPEAT","PROCEDURE","ENDPROC","SET","CALL","RIGHT","LEFT","UP","DOWN"],tokenizer:{root:[[/[A-Z_$][\w$]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/\d+/,"number"]]}}),a.Mj.registerCompletionItemProvider("custom",{provideCompletionItems:(e,t)=>{const n=e.getWordUntilPosition(t),o={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:n.startColumn,endColumn:n.endColumn};return{suggestions:[{label:{label:"IF",description:"Проверить на наличие препятствия в направлении DIR"},kind:a.Mj.CompletionItemKind.Snippet,insertText:["IFBLOCK ${1:DIR}","\t$0","ENDIF"].join("\n"),insertTextRules:a.Mj.CompletionItemInsertTextRule.InsertAsSnippet,range:o},{label:{label:"REPEAT",description:"Повторить N раз последующий блок кода"},kind:a.Mj.CompletionItemKind.Snippet,insertText:["REPEAT ${1:N}","\t$0","ENDREPEAT"].join("\n"),insertTextRules:a.Mj.CompletionItemInsertTextRule.InsertAsSnippet,range:o},{label:{label:"PROCEDURE",description:"Создать подпрограмму с именем NAME"},kind:a.Mj.CompletionItemKind.Snippet,insertText:["PROCEDURE ${1:NAME}","\t$0","ENDPROC"].join("\n"),insertTextRules:a.Mj.CompletionItemInsertTextRule.InsertAsSnippet,range:o},{label:{label:"SET",description:"Создать переменную с именем NAME и значением VAL"},kind:a.Mj.CompletionItemKind.Snippet,insertText:["SET ${1:NAME} = ${2:VALUE}"].join("\n"),insertTextRules:a.Mj.CompletionItemInsertTextRule.InsertAsSnippet,range:o},{label:{label:"DOWN",description:"Опуститься вниз на N клеток"},kind:a.Mj.CompletionItemKind.Snippet,insertText:["DOWN ${1:N}"].join("\n"),insertTextRules:a.Mj.CompletionItemInsertTextRule.InsertAsSnippet,range:o},{label:{label:"UP",description:"Подняться вверх на N клеток"},kind:a.Mj.CompletionItemKind.Snippet,insertText:["UP ${1:N}"].join("\n"),insertTextRules:a.Mj.CompletionItemInsertTextRule.InsertAsSnippet,range:o},{label:{label:"LEFT",description:"Сдвинуться влево на N клеток"},kind:a.Mj.CompletionItemKind.Snippet,insertText:["LEFT ${1:N}"].join("\n"),insertTextRules:a.Mj.CompletionItemInsertTextRule.InsertAsSnippet,range:o},{label:{label:"RIGHT",description:"Сдвинуться вправо на N клеток"},kind:a.Mj.CompletionItemKind.Snippet,insertText:["RIGHT ${1:N}"].join("\n"),insertTextRules:a.Mj.CompletionItemInsertTextRule.InsertAsSnippet,range:o}]}}});var b={name:"app",async mounted(){function e(e){const t=Math.min(window.innerHeight,window.innerWidth);return t*e/100}const t=document.querySelector("#editor"),n=a.j6.create(t,{value:"\n",language:"custom",theme:"vs-dark",fontSize:`${e(2.5)}px`,scrollbar:{verticalHasArrows:!0,horizontalHasArrows:!0}});f=s.Nn.initBoard("field",{boundingbox:[-.5,22,22,-.5],axis:!0,keepAspectRatio:!0,showCopyright:!1,defaultAxes:{x:{strokeColor:"white",highlightStrokeColor:"white",ticks:{insertTicks:!1,ticksDistance:1,minorHeight:0,strokeColor:"white",label:{strokeColor:"white",highlightStrokeColor:"white",offset:[0,-6],anchorX:"middle",anchorY:"top",fontSize:()=>e(2)}}},y:{strokeColor:"white",highlightStrokeColor:"white",ticks:{insertTicks:!1,ticksDistance:1,minorHeight:0,strokeColor:"white",label:{strokeColor:"white",highlightStrokeColor:"white",offset:[6,0],anchorX:"left",anchorY:"middle",fontSize:()=>e(2)}}}},drag:{enabled:!1},pan:{enabled:!0,needShift:!0},zoom:{min:1,max:2}}),addEventListener("resize",(function(){n.updateOptions({fontSize:`${e(2.5)}px`}),n.layout()}));const o=[];let r=0;const i=[!1],c={};async function _(){for(const t of o)f.removeObject(t);i[r]=!0,i.push(!1),r++;const e=r;console.log(i),await p({...(0,u.Q)(l(n.getValue())),interrupt:function(){return i[e]},board:f,objs:o,walls:c})}document.querySelector("#exec").addEventListener("click",(async function(e){await _()})),document.querySelector("#stop").addEventListener("click",(async function(e){i[r]=!0}));const d=function(e){e in c?(f.removeObject(c[e]),delete c[e]):c[e]=f.create("segment",e,{strokeColor:"red",highlightStrokeColor:"red"})};function b(e,t,n){const o=new Blob([e],{type:n}),r=document.createElement("a"),i=URL.createObjectURL(o);r.href=i,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(i)}f.on("down",(function(e,t){const n=f.getCoordsTopLeftCorner(e,t),o=s.bt(e,t),r=o[0]-n[0],i=o[1]-n[1];let c=new s.mZ(s.fy,[r,i],f);const[a,l,u]=c.usrCoords,[_,p,b]=[Math.floor(l),Math.round(l),Math.ceil(l)],[m,k,h]=[Math.floor(u),Math.round(u),Math.ceil(u)];Math.abs(p-l)<.1?c=[[p,m],[p,h]]:Math.abs(k-u)<.1&&(c=[[_,k],[b,k]]),c instanceof s.mZ||d(c)})),document.addEventListener("keydown",(function(e){83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),b(n.getValue(),"source.txt","text"))}),!1),document.addEventListener("keydown",(function(e){if(79===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)){e.preventDefault();const t=document.createElement("input");t.type="file",t.accept=".txt",t.onchange=e=>{const t=e.target.files[0],o=new FileReader;o.readAsText(t,"UTF-8"),o.onload=e=>{n.setValue(e.target.result)}},t.click()}}),!1);for(let a=0;a<21;a++)d([[a,0],[a+1,0]]),d([[a,21],[a+1,21]]);for(let a=0;a<21;a++)d([[0,a],[0,a+1]]),d([[21,a],[21,a+1]]);n.focus()}},m=n(89);const k=(0,m.Z)(b,[["render",c]]);var h=k,w=n(5431);(0,w.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),(0,o.ri)(h).mount("#app")},8859:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function parse(tokens,scope={},guard=!0){let cmds="";const token=function(){return tokens.splice(0,1)[0]};while(tokens.length){const temp=token();if("IFBLOCK"===temp)cmds+=`\n                if (scope.blocked('${token()}')) {\n                    ${parse(tokens,scope,!1)}\n                }\n            `;else if("REPEAT"===temp)cmds+=`\n                for (let pos = 0; pos < ${token()}; pos++) {\n                    ${parse(tokens,scope,!1)}\n                }\n            `;else if("PROCEDURE"===temp)scope[token()]=eval(`(\n                async function(scope) {\n                    ${parse(tokens,scope,!1)}\n                }\n            )`);else if("CALL"===temp)cmds+=`\n                await scope.${token()}(scope)\n            `;else if("SET"===temp)cmds+=`\n                scope.${token()} = ${token()}\n            `;else if(["RIGHT","UP","LEFT","DOWN"].includes(temp)){let e=token();e=isNaN(parseInt(e))?`scope.${e}`:e,cmds+=`\n                await scope.${temp}(${e})\n            `}else if(["ENDIF","ENDREPEAT","ENDPROC"].includes(temp))return cmds}return guard?{func:eval(`(\n                async function(scope) {\n                    ${cmds}\n                }\n            )`),scope:scope}:cmds}__webpack_require__.d(__webpack_exports__,{Q:function(){return parse}})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,function(){__webpack_require__.amdO={}}(),function(){var e=[];__webpack_require__.O=function(t,n,o,r){if(!n){var i=1/0;for(l=0;l<e.length;l++){n=e[l][0],o=e[l][1],r=e[l][2];for(var c=!0,a=0;a<n.length;a++)(!1&r||i>=r)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](n[a])}))?n.splice(a--,1):(c=!1,r<i&&(i=r));if(c){e.splice(l--,1);var s=o();void 0!==s&&(t=s)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[n,o,r]}}(),function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t,n){return __webpack_require__.f[n](e,t),t}),[]))}}(),function(){__webpack_require__.u=function(e){return"js/"+e+"."+{15:"9ece2fd2",75:"035f9f2a",386:"f25dcb6e",413:"d6f6768c",622:"767b483e",786:"f712247b",1022:"cbe27538",1030:"f956afe3",1319:"18312f16",1463:"521bf792",1598:"f786d536",1636:"d5fe9bc2",2008:"5fce23a7",2250:"9449a568",2341:"19dd8fea",2358:"11745268",2401:"e7f5c576",2532:"59789bc3",2784:"b7acaf4e",2804:"a11127a7",2936:"55a59490",3202:"8b9b2b8e",3263:"0cf31d41",3268:"0a5e49dc",3415:"30bfbdab",3629:"cbbf013e",3700:"a2daa725",3703:"69452b8f",3817:"fe32f44f",3956:"a5e4baea",3986:"63d066a4",4034:"25b2386e",4366:"e027a4f6",4816:"3673cbe4",4962:"0fcc9aa8",5019:"effb13e5",5096:"3cd6077b",5106:"7a1b6b60",5191:"9b9b1f2a",5254:"bd42e145",5527:"bf311581",5630:"a88710e2",5661:"929f29d3",5662:"d2e092fe",5710:"ff8a3b76",5856:"e3ee4055",5985:"43114f9f",6044:"aed858a7",6048:"a73a7d20",6346:"af0dc9cb",6388:"7119da0b",6540:"d124cf95",6590:"98021b58",6786:"90dcf2d6",6862:"83bb0c20",6877:"2fdd9977",6896:"3a096775",7007:"534b6154",7010:"13585428",7083:"c4a5a496",7099:"4518cc78",7146:"c17273ea",7271:"91406553",7473:"092eb75a",7500:"2e62c435",7517:"dbe07dad",7643:"f04235d0",7954:"dd992ef9",7973:"bcaa5dbd",8248:"78cb5404",8412:"a3b7bf4a",8647:"5547c8dd",8822:"605f539e",9007:"abcdc446",9111:"5e36d569",9270:"3699e067",9380:"cd7c82d1",9583:"c7bc3d55",9674:"61966b52",9700:"103a3ddd",9765:"357e3f3b",9903:"46bf8e96",9906:"00becaea",9928:"f26b6c36"}[e]+".js"}}(),function(){__webpack_require__.miniCssF=function(e){}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="grid-studio:";__webpack_require__.l=function(n,o,r,i){if(e[n])e[n].push(o);else{var c,a;if(void 0!==r)for(var s=document.getElementsByTagName("script"),l=0;l<s.length;l++){var u=s[l];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+r){c=u;break}}c||(a=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,__webpack_require__.nc&&c.setAttribute("nonce",__webpack_require__.nc),c.setAttribute("data-webpack",t+r),c.src=n),e[n]=[o];var _=function(t,o){c.onerror=c.onload=null,clearTimeout(d);var r=e[n];if(delete e[n],c.parentNode&&c.parentNode.removeChild(c),r&&r.forEach((function(e){return e(o)})),t)return t(o)},d=setTimeout(_.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=_.bind(null,c.onerror),c.onload=_.bind(null,c.onload),a&&document.head.appendChild(c)}}}(),function(){__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){__webpack_require__.p="/"}(),function(){var e={2143:0};__webpack_require__.f.j=function(t,n){var o=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise((function(n,r){o=e[t]=[n,r]}));n.push(o[2]=r);var i=__webpack_require__.p+__webpack_require__.u(t),c=new Error,a=function(n){if(__webpack_require__.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;c.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",c.name="ChunkLoadError",c.type=r,c.request=i,o[1](c)}};__webpack_require__.l(i,a,"chunk-"+t,t)}},__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,i=n[0],c=n[1],a=n[2],s=0;if(i.some((function(t){return 0!==e[t]}))){for(o in c)__webpack_require__.o(c,o)&&(__webpack_require__.m[o]=c[o]);if(a)var l=a(__webpack_require__)}for(t&&t(n);s<i.length;s++)r=i[s],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return __webpack_require__.O(l)},n=self["webpackChunkgrid_studio"]=self["webpackChunkgrid_studio"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var __webpack_exports__=__webpack_require__.O(void 0,[4998],(function(){return __webpack_require__(6152)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.0f563630.js.map